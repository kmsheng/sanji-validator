!function(){"use strict";angular.module("sanji.validator.value",[]).value("_",window._).value("sanjiDefaultValidators",{email:{rule:/^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i,error:"Invalid email format."},password:{rule:/^(?=.*\d)(?=.*[a-zA-Z]).{6,100}$/,error:"Invalid password format. Password must include at least on letter, one numeric digit and must be at least 6 characters, no more than 100 characters."},range:{rule:function(r,e,t){var a=r.length;return e=+e,t=+t,a>=e&&t>=a},error:"The value should be in range ({{minlength}} ~ {{maxlength}})."},community:{rule:/^\.{1,100}$/,error:"Invalid community format.",scope:{minlength:1,maxlength:100}},required:{error:"This field is required."},ip:{rule:/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,error:"Invalid IP format."},dial:{rule:/^([0-9#\*]{1,})$/,error:"Invalid dial number format."},number:{rule:/^\s*\d+\s*$/,error:"Invalid number format."},port:{rule:/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,error:"Invalid port format."},ipsecAuthKey:{rule:/[\d]{16}/,error:"The key length must equal to 16 characters."},ipsecEncryptKey:{rule:/[\d]{24}/,error:"The key length must equal to 24 characters."},mac:{rule:/^([0-9A-F]{2}[:]){5}([0-9A-F]{2})$/,error:"This isn't mac address."},percentage:{rule:/(^(100(?:\.0{1,2})?))|(?!^0*$)(?!^0*\.0*$)^\d{1,2}(\.\d{1,2})?$/,error:"The range of percentage is 1 - 100 and can't be empty."},weight:{rule:/^(10|[1-9]?)$/,error:"The range of weight is 1 - 10 and can't be empty."},floatNum:{rule:/[-+]?(\d*[.])?\d+/,error:"This isn't float number and can't be empty."},passwordLen:{rule:/^\w{5,}$/,error:"The password is at least 5 length."},trackerTimeInterval:{rule:function(r){return r>0&&120>=r},error:"The range is 1 - 120 and can't be empty."},confirmPassword:{rule:function(r,e){return r===e.$parent.account.newPwd},error:"Confirm error."},wifiWepKeyFormat:{rule:function(r){var e="^[0-9a-zA-Z]{5}$|^[0-9a-zA-Z]{13}$|^[0-9a-zA-Z]{16}$|^[0-9a-zA-Z]{29}$|^[0-9a-fA-F]{10}$|^[0-9a-fA-F]{26}$|^[0-9a-fA-F]{32}$|^[0-9a-fA-F]{58}$";return new RegExp(e).test(r)},error:"The HEX key length must be 10, 26, 32 or 58 and ASCII key length must be 5, 13, 16 or 29."},wifiPskFormat:{rule:function(r){return/^[0-9a-zA-Z]{8,62}$|^[0-9a-fA-F]{64}$/.test(r)},error:"The HEX key length must be 64 and ASCII key length must be 8 - 63."},wifiRadiusKeyFormat:{rule:function(r){return/^[0-9a-zA-Z]{8,31}$/.test(r)},error:"The ASCII key length must be 8 - 31."}})}(),function(){"use strict";angular.module("sanji.validator.provider",["sanji.validator.value"]).provider("sanjiValidatorConfig",function(){var r,e,t,a,i,o,n,l;r=this,e={},e.validators={},e.validMethod="watch",t=function(r){a=r,o=a.get("$q"),n=a.get("$timeout"),i=a.get("$rootScope"),l=a.get("_"),e.validators=a.get("sanjiDefaultValidators")},r.isReservedRule=function(r){return-1!==["range","required"].indexOf(r)},r.extractVarFromFunc=function(r){var e,t;return e=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,t=r.toString().match(e)[1].split(/,/),t=l.map(t,function(r){return r.replace(/^\s+|\s+$/g,"")})},r.runReservedRule=function(e,t,a){var i,o,n;return o={},n=[],i=r.extractVarFromFunc(e),o.value=t,l.each(a,function(r,e){return"value"===e?!0:(-1!==i.indexOf(e)&&(o[e]=r),void 0)}),l.each(i,function(r){n.push(o[r])}),e.apply(this,n)},r.setValidMethod=function(r){e.validMethod=r},r.getValidMethod=function(){return e.validMethod},r.setValidators=function(r){angular.extend(e.validators,r),i.$broadcast("sanji::validators::change")},r.getValidators=function(){return e.validators},r.getValidatorsByNames=function(e){var t,a;return t=r.getValidators(),a=[],l.each(e,function(r){var e;if(r=r.replace(/^\s+|\s+$/g,""),e=t[r],!e)throw new Error("validator "+r+" not found.");e.name=r,a.push(e)}),a},r.setCustomErrorHtml=function(r){e.customCustomErrorHtml=r},r.getCustomErrorHtml=function(){return e.customCustomErrorHtml},r.getErrorHtml=function(r){return'<p class="validation-invalid">'+r+"</p>"},r.isRegExp=function(r){return RegExp===r.constructor},r.validate=function(r,e){e.hasSetFocus=!1;for(var t in e)e[t]&&e[t].hasOwnProperty("$dirty")&&r.$broadcast(t+"::sanji-submit");var a=o.defer();return n(function(){e.$valid?a.resolve("success"):a.reject("error")}),a.promise},r.useBlur=function(e){return e&&angular.isDefined(e.validatorMethod)?"blur"===e.validatorMethod:"blur"===r.getValidMethod()},r.useSubmit=function(e){return e&&angular.isDefined(e.validatorMethod)?"submit"===e.validatorMethod:"submit"===r.getValidMethod()},r.$get=["$injector",function(e){return t(e),{getCustomErrorHtml:r.getCustomErrorHtml,getErrorHtml:r.getErrorHtml,getValidMethod:r.getValidMethod,getValidators:r.getValidators,getValidatorsByNames:r.getValidatorsByNames,isRegExp:r.isRegExp,isReservedRule:r.isReservedRule,runReservedRule:r.runReservedRule,setCustomErrorHtml:r.setCustomErrorHtml,setValidMethod:r.setValidMethod,setValidators:r.setValidators,useBlur:r.useBlur,useSubmit:r.useSubmit,validate:r.validate}}]})}(),function(){"use strict";angular.module("sanji.validator.directive",["sanji.validator.provider"]).directive("sanjiValidatorSubmit",["sanjiValidatorConfig",function(r){return{priority:-1,restrict:"A",require:["form","?sanjiValidatorMethod"],link:function(e,t,a,i){var o,n;o=i[0],n=i[1],t.on("submit",function(t){(r.useBlur(n)||r.useSubmit(n))&&(t.stopImmediatePropagation(),r.validate(e,o).then(function(){e.$eval(a.ngSubmit)}))})}}}]).directive("sanjiValidatorNoErrorMsg",function(){return{restrict:"A",require:"form",controller:["$scope",function(){}]}}).directive("sanjiValidatorMethod",function(){return{restrict:"A",require:"form",scope:{sanjiValidatorMethod:"@"},controller:["$scope",function(r){this.validatorMethod=r.sanjiValidatorMethod}]}}).directive("sanjiValidator",["sanjiValidatorConfig","$interpolate","$compile","_","$timeout",function(r,e,t,a,i){var o,n,l,u,s;return s={},o=function(e,t,i,o){var n,l;return n=!1,a.each(t,function(t){var a,i;return a=t.rule,i=!!e,"required"===t.name?n=!i:i?r.isReservedRule(t.name)?n=!r.runReservedRule(a,e,o):angular.isFunction(a)?n=!a(e):r.isRegExp(a)&&(n=!a.test(e)):n=!1,n?(l=t,!1):void 0}),i.$setValidity(i.$name,!n),{error:n,errorValidator:l}},n=function(a,o,n,l){if(angular.isString(l.beforeElementSelector)&&(a=a.closest(l.beforeElementSelector)),o.error){var d=o.errorValidator.error;if(r.isReservedRule(o.errorValidator.name)){var c=e(o.errorValidator.error);d=c(n)}var m=r.getCustomErrorHtml();if(!m)return a.next().html(r.getErrorHtml(d));var f=l.scope.$id+a.attr("name");s[f]&&s[f].$destroy(),u=l.scope.$new(),s[f]=u,u.errorMessage=d,i(function(){a.next().html(t(m)(u))})}return a.next().html("")},l=function(t,a,i,o){if(t){var n=angular.copy(a);if(r.isReservedRule(a.name)){var l=e(a.error),u=l(o);n.error=u}i.invalidCallback({errorValidator:n})}else i.validCallback()},{restrict:"A",require:["ngModel","?^sanjiValidatorMethod","?^sanjiValidatorNoErrorMsg","^form"],scope:{ngModel:"=",validCallback:"&",invalidCallback:"&",beforeElementSelector:"@"},link:function(e,t,a,i){angular.isString(e.beforeElementSelector)?t.closest(e.beforeElementSelector).after("<span></span>"):t.after("<span></span>");var u,s,d,c,m,f,v,g;return c=i[0],m=i[1],v=i[2],g=i[3],u=a.sanjiValidator.split(","),s=r.getValidatorsByNames(u),c.$setValidity(c.$name,!0),f={},f.beforeElementSelector=e.beforeElementSelector,f.scope=e,e.$on("sanji::validators::change",function(){s=r.getValidatorsByNames(u)}),e.$on(c.$name+"::sanji-submit",function(){var r=o(t[0].value,s,c,a);angular.isDefined(v)||n(t,r,a,f),l(r.error,r.errorValidator,e,a),r.error&&!1===g.hasSetFocus&&(t[0].focus(),g.hasSetFocus=!0)}),r.useSubmit(m)?void 0:(d=function(){t.bind("blur",function(){e.$apply(function(){var r=o(t[0].value,s,c,a);angular.isDefined(v)||n(t,r,a,f),l(r.error,r.errorValidator,e,a)})})},r.useBlur(m)?(d(),void 0):(e.$watch("ngModel",function(r){c.$pristine&&c.$viewValue&&c.$setViewValue(c.$viewValue);var i=o(r,s,c,a);angular.isDefined(v)||n(t,i,a,f),l(i.error,i.errorValidator,e,a)}),void 0))}}}])}(),function(){"use strict";angular.module("sanji.validator",["sanji.validator.value","sanji.validator.provider","sanji.validator.directive"])}();